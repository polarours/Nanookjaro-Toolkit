# Nanookjaro API æ–‡æ¡£ ğŸ“š

## æ¦‚è¿° ğŸŒŸ

Nanookjaro å·¥å…·åŒ…æä¾›äº†ä¸€ä¸ª C++ åç«¯åº“ï¼Œè¯¥åº“é€šè¿‡ C é£æ ¼çš„å¯¼å‡ºå‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ FFI ä»å…¶ä»–è¯­è¨€è®¿é—®ã€‚è¿™ä¸€ API æ˜¯å›¾å½¢ç•Œé¢å’Œå‘½ä»¤è¡Œç•Œé¢çš„åŸºç¡€ï¼Œæä¾›ç³»ç»Ÿç›‘æ§ã€åŒ…ç®¡ç†å’Œé…ç½®åŠŸèƒ½ã€‚

ä¸»è¦æ¥å£æ˜¯é€šè¿‡ä¸€ä¸ªå…±äº«åº“ï¼Œæš´éœ²äº†ç”¨äºç³»ç»Ÿä¿¡æ¯æ£€ç´¢ã€åŒ…ç®¡ç†å’Œé…ç½®çš„å‡½æ•°ã€‚

## åº“å‡½æ•° ğŸ§©

### ç³»ç»Ÿä¿¡æ¯å‡½æ•° ğŸ–¥ï¸

#### `const char* nj_get_system_summary()`

ä»¥ JSON æ ¼å¼æ£€ç´¢ç³»ç»Ÿä¿¡æ¯çš„ç»¼åˆæ‘˜è¦ã€‚

**è¿”å›å€¼**: åŒ…å«ç³»ç»Ÿä¿¡æ¯çš„ JSON å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬ï¼š
- CPU è¯¦ç»†ä¿¡æ¯ï¼ˆå‹å·ã€æ ¸å¿ƒæ•°ã€ä½¿ç”¨ç‡ï¼‰
- å†…å­˜ä¿¡æ¯ï¼ˆæ€»é‡ã€å¯ç”¨ã€å·²ç”¨ã€äº¤æ¢åŒºï¼‰
- è´Ÿè½½å¹³å‡å€¼
- æ–‡ä»¶ç³»ç»Ÿä½¿ç”¨æƒ…å†µ
- GPU ä¿¡æ¯
- ç½‘ç»œæ¥å£ä¿¡æ¯
- ä»£ç†è®¾ç½®

**ç¤ºä¾‹è¾“å‡º**:
```json
{
  "timestamp": "2025-11-13T15:30:45Z",
  "cpu": {
    "model": "Intel(R) Core(TM) i7-14700HX",
    "cores": 28,
    "usage_percent": 12.5
  },
  "memory": {
    "total_kb": 16070652,
    "available_kb": 4322932,
    "used_kb": 11747720,
    "usage_percent": 73.10,
    "swap_total_kb": 0,
    "swap_free_kb": 0,
    "swap_used_kb": 0,
    "swap_usage_percent": 0.00
  },
  "load_average": [2.92, 2.82, 6.22],
  "filesystems": [
    {
      "mount": "/",
      "total_bytes": 1023892836352,
      "available_bytes": 569182707712
    }
  ],
  "gpu": [
    {
      "name": "Intel Corporation Raptor Lake-S UHD Graphics (rev 04)",
      "vendor": "Intel",
      "driver_version": "Unknown",
      "memory_mb": 0,
      "usage_percent": 0.00,
      "temperature_celsius": -1.00
    },
    {
      "name": "NVIDIA Corporation AD107M [GeForce RTX 4060 Max-Q / Mobile] (rev a1)",
      "vendor": "NVIDIA",
      "driver_version": "Unknown",
      "memory_mb": 0,
      "usage_percent": 0.00,
      "temperature_celsius": -1.00
    }
  ],
  "network": [
    {
      "name": "enp7s0",
      "mac_address": "bc:ec:a0:49:4d:b5",
      "ipv4_address": "192.168.1.100",
      "ipv6_address": "fe80::beec:a0ff:fe49:4db5",
      "rx_rate_kbps": 125.50,
      "tx_rate_kbps": 10.25,
      "is_up": true
    }
  ],
  "proxy": {
    "http": null,
    "https": null
  }
}
```

#### `void nj_free_string(const char* s)`

é‡Šæ”¾åº“ä¸ºå­—ç¬¦ä¸²è¿”å›åˆ†é…çš„å†…å­˜ã€‚

**å‚æ•°**:
- `s`: è¦é‡Šæ”¾çš„å­—ç¬¦ä¸²æŒ‡é’ˆ

#### `const char* nj_get_cpu_info()`

æ£€ç´¢è¯¦ç»†çš„ CPU ä¿¡æ¯ã€‚

**è¿”å›å€¼**: åŒ…å«è¯¦ç»† CPU ä¿¡æ¯çš„ JSON å­—ç¬¦ä¸²ã€‚

#### `const char* nj_get_gpu_info()`

æ£€ç´¢è¯¦ç»†çš„ GPU ä¿¡æ¯ã€‚

**è¿”å›å€¼**: åŒ…å«è¯¦ç»† GPU ä¿¡æ¯çš„ JSON å­—ç¬¦ä¸²ã€‚

#### `const char* nj_get_memory_info()`

æ£€ç´¢è¯¦ç»†çš„å†…å­˜ä¿¡æ¯ã€‚

**è¿”å›å€¼**: åŒ…å«è¯¦ç»†å†…å­˜ä¿¡æ¯çš„ JSON å­—ç¬¦ä¸²ã€‚

#### `const char* nj_get_disk_info()`

æ£€ç´¢è¯¦ç»†çš„ç£ç›˜ä¿¡æ¯ã€‚

**è¿”å›å€¼**: åŒ…å«è¯¦ç»†ç£ç›˜ä¿¡æ¯çš„ JSON å­—ç¬¦ä¸²ã€‚

#### `const char* nj_get_network_info()`

æ£€ç´¢è¯¦ç»†çš„ç½‘ç»œä¿¡æ¯ã€‚

**è¿”å›å€¼**: åŒ…å«è¯¦ç»†ç½‘ç»œä¿¡æ¯çš„ JSON å­—ç¬¦ä¸²ã€‚

#### `const char* nj_get_drivers_info()`

æ£€ç´¢ç³»ç»Ÿé©±åŠ¨ä¿¡æ¯ã€‚

**è¿”å›å€¼**: åŒ…å«é©±åŠ¨ä¿¡æ¯çš„ JSON å­—ç¬¦ä¸²ã€‚

### åŒ…ç®¡ç†å‡½æ•° ğŸ“¦

#### `const char* nj_pacman_sync_upgrade(int assume_yes)`

ä½¿ç”¨ pacman æ‰§è¡Œç³»ç»Ÿå‡çº§ï¼ˆä»…é™ Arch Linuxï¼‰ã€‚

**å‚æ•°**:
- `assume_yes`: å¦‚æœéé›¶ï¼Œåˆ™è‡ªåŠ¨å›ç­”æç¤ºä¸º"æ˜¯"

**è¿”å›å€¼**: åŒ…å«å‡çº§ç»“æœçš„ JSON å­—ç¬¦ä¸²ï¼š
- æ‰§è¡Œçš„å‘½ä»¤
- é€€å‡ºä»£ç 
- å‘½ä»¤çš„è¾“å‡º

#### `const char* nj_pacman_list_updates()`

ä½¿ç”¨ pacman åˆ—å‡ºå¯ç”¨çš„åŒ…æ›´æ–°ã€‚

**è¿”å›å€¼**: åŒ…å«æ›´æ–°ä¿¡æ¯çš„ JSON å­—ç¬¦ä¸²ï¼š
- æœ‰æ›´æ–°çš„åŒ…åˆ—è¡¨
- æ‰§è¡Œçš„å‘½ä»¤
- é€€å‡ºä»£ç 

#### `const char* nj_pacman_install_packages_json(const char** packages, int count, int assume_yes)`

ä½¿ç”¨ pacman å®‰è£…æŒ‡å®šçš„åŒ…ã€‚

**å‚æ•°**:
- `packages`: è¦å®‰è£…çš„åŒ…åæ•°ç»„
- `count`: æ•°ç»„ä¸­çš„åŒ…æ•°é‡
- `assume_yes`: å¦‚æœéé›¶ï¼Œåˆ™è‡ªåŠ¨å›ç­”æç¤ºä¸º"æ˜¯"

**è¿”å›å€¼**: åŒ…å«å®‰è£…ç»“æœçš„ JSON å­—ç¬¦ä¸²ã€‚

### é…ç½®å‡½æ•° âš™ï¸

#### `const char* nj_set_proxy(const char* http_proxy, const char* https_proxy)`

è®¾ç½® HTTP å’Œ HTTPS ä»£ç†é…ç½®ã€‚

**å‚æ•°**:
- `http_proxy`: HTTP ä»£ç† URLï¼ˆå¯ä»¥ä¸º NULLï¼‰
- `https_proxy`: HTTPS ä»£ç† URLï¼ˆå¯ä»¥ä¸º NULLï¼‰

**è¿”å›å€¼**: æŒ‡ç¤ºæˆåŠŸæˆ–å¤±è´¥çš„ JSON å­—ç¬¦ä¸²ã€‚

## é”™è¯¯å¤„ç† âŒ

æ‰€æœ‰è¿”å› `const char*` çš„å‡½æ•°åœ¨å‘ç”Ÿé”™è¯¯æ—¶éƒ½ä¼šè¿”å›ä¸€ä¸ªå¸¦æœ‰ "error" å­—æ®µçš„ JSON å¯¹è±¡ã€‚å¤„ç†ç»“æœæ—¶åº”å§‹ç»ˆæ£€æŸ¥æ­¤å­—æ®µã€‚

## å†…å­˜ç®¡ç† ğŸ’¾

åº“è¿”å›çš„æ‰€æœ‰å­—ç¬¦ä¸²éƒ½å¿…é¡»ä½¿ç”¨ `nj_free_string()` é‡Šæ”¾ï¼Œä»¥é¿å…å†…å­˜æ³„æ¼ã€‚

## çº¿ç¨‹å®‰å…¨ ğŸ§µ

åº“ä¸ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚ä»å¤šä¸ªçº¿ç¨‹è®¿é—®æ—¶åº”ç”±è°ƒç”¨åº”ç”¨ç¨‹åºè¿›è¡ŒåŒæ­¥ã€‚

## å¹³å°æ”¯æŒ ğŸ–¥ï¸

Nanookjaro æ”¯æŒä¸åŒå¹³å°ï¼ŒåŠŸèƒ½çº§åˆ«ä¸åŒï¼š

- **Linux (Arch/Manjaro)**: å®Œå…¨æ”¯æŒæ‰€æœ‰åŠŸèƒ½
  - å®Œæ•´çš„ç³»ç»Ÿç›‘æ§åŠŸèƒ½
  - ä¸ pacman çš„å®Œæ•´åŒ…ç®¡ç†é›†æˆ
  - æ‰€æœ‰ API å‡½æ•°å‡å¯æ“ä½œ

- **Linux (å…¶ä»–å‘è¡Œç‰ˆ)**: æ ¸å¿ƒæ”¯æŒç³»ç»Ÿç›‘æ§
  - ç³»ç»Ÿä¿¡æ¯æ£€ç´¢åŠŸèƒ½å®Œå…¨å¯ç”¨
  - æœ‰é™çš„åŒ…ç®¡ç†
  - é…ç½®åŠŸèƒ½å¯ç”¨

- **macOS**: è®¡åˆ’åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­æ”¯æŒ
  - æ ¸å¿ƒç³»ç»Ÿç›‘æ§åŠŸèƒ½
  - å¹³å°ç‰¹å®šå¢å¼ºåŠŸèƒ½

- **Windows**: ç›®å‰ä¸æ”¯æŒ